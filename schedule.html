{% extends "base.html" %}

{% block title %}StudyPlannr - Edit Schedule{% endblock %}

{% block head %}
<script type="application/javascript" src="/scripts/jquery.jeditable.mini.js"></script>
<script type="application/javascript" src="/scripts/jquery-ui.custom.min.js"></script>
<script type="application/javascript" src="/scripts/jquery.ui.timepicker.js"></script>
<link type="text/css" rel="stylesheet" href="/stylesheets/smoothness/jquery-ui-1.8.16.custom.css" />
<link type="text/css" rel="stylesheet" href="/stylesheets/jquery-ui-timepicker.css" />
<script type="application/javascript" src="/scripts/bootstrap-alert.js"></script>
<script type="application/javascript" src="/scripts/schedule_scripts.js"></script>
<script type="text/javascript">
	var scheduleKey = '{{ schedule.key }}';
</script>
{% endblock %}

{% block content %}
<div id="error-box" class="alert alert-error fade in">
	<h4 class="alert-heading">Error!</h4>
	<span id="error-box-message" />
</div>

<h2>{{ schedule.name }}</h2>

<div class="row">

	<div class="span2" style="height: 30em;">	
		{% for i in items %}
			<div id="item-row-{{i.key}}" class="row" style="height: {{ i.pct }}%;">
				<div class="color-bar-{{forloop.counter}} {%if forloop.last%}color-bar-last{%endif%}" 
				     style="background-color: {{ i.get_color }};">
					&nbsp;
				</div>
				<div class="subject-label">
					<div id="item-start-time-{{i.key}}">{{ i.start_time }}</div>
					<strong><div id="subject-name-{{i.key}}" class="subject-name" data-key="{{i.key}}">{{ i.name|escape }}</div></strong>
					<div>
						<a class="item-more-link" href="/schedule/{{schedule.key}}/{{i.key}}/more">More</a>
						<a class="item-less-link" href="/schedule/{{schedule.key}}/{{i.key}}/less">Less</a>
						<a class="item-remove-link" href="/schedule/{{schedule.key}}/{{i.key}}/remove">Remove</a>
					</div>
				</div>
			</div>
		{% endfor %}
		<div>
			<div id="items-end-time" class="subject-label">
			{{ end_time }}
			</div>
		</div>
	</div>

	<div class="span8 offset2">
		<div class="row">
			<form class="form-horizontal" action="/schedule/{{ schedule.key }}/add" method="post">
				<fieldset>
					<div class="control-group">
						<label for="add-item-name-textbox">Add Subject:</label>
						<div class="controls">
							<input type="text" name="name" id="add-item-name-textbox"></input>
							<input type="submit" class="btn btn-primary" value="Add"></input>
						</div>
					</div>
				</fieldset>
			</form>
		</div>

		<br />

		<div class="row">
			<legend>Options</legend>
			<form id="edit-times-container" class="form-horizontal" action="/schedule/{{ schedule.key }}/edit" method="post">
				<fieldset>

					<div class="control-group">
						<div class="controls">
							<label class="checkbox">
								<input type="checkbox" id="check-enable-breaks">
									Enable breaks between subjects.
								</input>
							</label>
						</div>
					</div>

					<div class="control-group">
						<div class="controls">
							<label class="checkbox">
								<input type="checkbox" id="check-enable-notifications">
									Enable desktop notifications when it's time to change subjects.
								</input>
							</label>
						</div>
					</div>

					<div class="control-group">
						<label for="start-time-picker">Start time:</label>
						<div class="controls">
							<input type="text" name="start-time-picker" id="start-time-picker" value="{{ start_time }}" />
						</div>
					</div>
					<div class="control-group">
						<label for="end-time-picker">End time:</label>
						<div class="controls">
							<input type="text" name="end-time-picker" id="end-time-picker" value="{{ end_time }}" />
						</div>
					</div>
				</fieldset>
			</form>
		</div>
	</div>

</div>

<br /><br />
{% endblock %}